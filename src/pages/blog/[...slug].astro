---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
    const posts = await getCollection('blog');
    return posts.map((post: CollectionEntry<'blog'>) => ({
        params: { slug: post.slug },
        props: post,
    }));
}

type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { Content } = await post.render();
---

<Layout 
    title={`${post.data.title} - Hoogly Blog`}
    description={post.data.description}
    type="article"
    bodyClass="post-page"
>
    <article class="blog-post">
        <header class="post-header" style="margin-top:0;margin-bottom:0;">
            <div class="container">
                <h1 class="post-title">{post.data.title}</h1>
                
                <div class="post-meta-large">
                    <time datetime={post.data.publishDate.toISOString()}>
                        {post.data.publishDate.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        })}
                    </time>
                    {post.data.author && (
                        <span class="author">by {post.data.author}</span>
                    )}
                </div>

                <p class="post-description-large">{post.data.description}</p>
                
                {post.data.tags && post.data.tags.length > 0 && (
                    <div class="post-tags-large">
                        {post.data.tags.map((tag: string) => (
                            <span class="post-tag">{tag}</span>
                        ))}
                    </div>
                )}
            </div>
        </header>

        <div class="post-content">
            <div class="container">
                <Content />
            </div>
        </div>
    </article>

    <nav class="post-nav">
        <div class="container">
            <a href="/blog" class="back-to-blog">‚Üê Back to Blog</a>
        </div>
    </nav>
</Layout> 